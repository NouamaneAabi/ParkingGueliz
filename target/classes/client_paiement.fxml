<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" 
      fx:controller="com.parkingmanager.controller.ClientPaiementController" 
      spacing="20" style="-fx-padding: 40; -fx-background-color: #2c3e50;" stylesheets="@styles.css">
    <children>
        <Label text="Borne de Paiement Automatique" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" alignment="CENTER" maxWidth="Infinity" />
        
        <HBox spacing="30" VBox.vgrow="ALWAYS">
            <children>
                <!-- Section Recherche -->
                <VBox spacing="20" styleClass="card" prefWidth="400" alignment="TOP_CENTER">
                    <children>
                        <Label text="Rechercher votre véhicule" styleClass="card-title" />
                        <VBox spacing="10">
                            <Label text="Immatriculation (ex: AB-123-CD) :" styleClass="stat-label" />
                            <TextField fx:id="immatriculationSearchField" promptText="RE-CHR-CH" style="-fx-font-size: 18px; -fx-alignment: center;" />
                            <Button text="Vérifier" onAction="#rechercherTicket" styleClass="button, btn-subscribers" maxWidth="Infinity" prefHeight="50" />
                        </VBox>
                        
                        <Separator />
                        
                        <VBox fx:id="ticketInfoBox" spacing="15" visible="false">
                            <children>
                                <Label text="Détails de l'occupation" styleClass="card-title" />
                                <GridPane vgap="10" hgap="10">
                                    <Label text="Place :" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="stat-label" />
                                    <Label fx:id="placeLabel" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="stat-value" />
                                    
                                    <Label text="Arrivée :" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="stat-label" />
                                    <Label fx:id="arriveeLabel" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="stat-value" />
                                    
                                    <Label text="Durée :" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="stat-label" />
                                    <Label fx:id="dureeLabel" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="stat-value" />
                                    
                                    <Label text="Total à payer :" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="stat-label" />
                                    <Label fx:id="totalLabel" GridPane.rowIndex="3" GridPane.columnIndex="1" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;" />
                                </GridPane>
                            </children>
                        </VBox>
                    </children>
                </VBox>
                
                <!-- Section Paiement -->
                <VBox fx:id="paymentBox" spacing="20" styleClass="card" HBox.hgrow="ALWAYS" visible="false">
                    <children>
                        <Label text="Paiement par Carte Bancaire" styleClass="card-title" />
                        
                        <VBox spacing="10">
                            <Label text="Nom sur la carte" styleClass="stat-label" />
                            <TextField fx:id="cardNameField" promptText="NOUAMANE AABI" />
                        </VBox>
                        
                        <VBox spacing="10">
                            <Label text="Numéro de carte" styleClass="stat-label" />
                            <TextField fx:id="cardNumberField" promptText="**** **** **** ****" />
                        </VBox>
                        
                        <HBox spacing="20">
                            <VBox spacing="10" HBox.hgrow="ALWAYS">
                                <Label text="Date d'expiration" styleClass="stat-label" />
                                <TextField fx:id="cardExpiryField" promptText="MM/YY" />
                            </VBox>
                            <VBox spacing="10" HBox.hgrow="ALWAYS">
                                <Label text="CVC" styleClass="stat-label" />
                                <PasswordField fx:id="cardCvcField" promptText="123" />
                            </VBox>
                        </HBox>
                        
                        <Region VBox.vgrow="ALWAYS" />
                        
                        <Button fx:id="payButton" text="PAYER MAINTENANT" onAction="#procederPaiement" styleClass="button, btn-entry" maxWidth="Infinity" prefHeight="60" style="-fx-font-size: 20px; -fx-font-weight: bold;" />
                    </children>
                </VBox>
            </children>
        </HBox>
        
        <HBox alignment="CENTER_LEFT">
            <Button text="Retour" onAction="#fermer" styleClass="button, btn-refresh" />
        </HBox>
    </children>
</VBox>
